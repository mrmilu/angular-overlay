var app=angular.module("angular-overlay",[]);app.factory("angularOverlayService",[function(){return{overlays:{},mapped:!1,add:function(e){var a=this;this.overlays[e.overlayId]=e,this.mapped||(this.mapped=!0,angular.element("*").click(function(e){a.inOverlay(e.target)||a.hideAll()}))},hideVisible:function(e){angular.forEach(this.overlays,function(a){a.overlayId!=e&&a.visible&&a.hide()})},hideAll:function(){angular.forEach(this.overlays,function(e){e.visible&&e.hide()})},inOverlay:function(e){var a=!1;return angular.forEach(this.overlays,function(l){!a&&angular.element(e).is(l.$toggler)&&(a=!0)}),a}}}]),app.directive("angularOverlay",function(e){return{restrict:"A",scope:{},link:function(a,l,i){a.overlayId=i.angularOverlay,a.$toggler=angular.element('[angular-overlay-toggler="'+a.overlayId+'"]'),a.$content=angular.element('[angular-overlay-content="'+a.overlayId+'"]'),a.visible=!1,a.visibleCount=0,a.show=function(){a.visible=!0,l.addClass("active"),a.$toggler.addClass("active"),a.$content.stop().fadeIn()},a.hide=function(){a.visible=!1,l.removeClass("active"),a.$toggler.removeClass("active"),a.$content.stop().fadeOut()},"click"==i.event?a.$toggler.click(function(){e.hideVisible(a.overlayId),a.visible?a.hide():a.show()}):l.hover(function(){e.hideVisible(a.overlayId),a.show()},function(){e.hideAll()}),e.add(a)}}});